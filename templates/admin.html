<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
</head>
<body>
    <h2>Pending Payments</h2>
    <ul id="paymentList">
        {% for user in payments %}
            <li>
                {{ user.name }} - Approved: {{ user.approved }}
                {% if not user.approved %}
                    <button onclick="approve('{{ user.name }}')">Approve</button>
                {% endif %}
            </li>
        {% endfor %}
    </ul>

    <script>
        function approve(name){
            fetch('/approve_payment', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({name: name})
            }).then(res => res.json()).then(data => {
                if(data.status === 'approved'){
                    alert(name + ' has been approved!');
                    location.reload();
                }
            });
        }
    </script>
</body>
</html>
